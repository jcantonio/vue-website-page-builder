# Custom Components Setup Guide- [Custom Components Setup Guide](#custom-components-setup-guide)

- [Custom Components Setup Guide- Custom Components Setup Guide](#custom-components-setup-guide--custom-components-setup-guide)
  - [Quick Setup](#quick-setup)
  - [Custom Media Library Component](#custom-media-library-component)
    - [You have full control over your media library UI](#you-have-full-control-over-your-media-library-ui)
  - [Custom Layout Builder Component](#custom-layout-builder-component)
    - [How Should the Components Array Look?](#how-should-the-components-array-look)
  - [Benefits of this Approach](#benefits-of-this-approach)

This guide will walk you through creating custom components that can be injected into the Vue Website Page Builder.

## Quick Setup

Begin by creating a `ComponentsPageBuilder` folder in your project to organize your customizable components:

```
your-project/
├── src/
│   └── ComponentsPageBuilder/
│       ├── YourMediaLibraryComponent.vue
│       ├── YourCustomBuilderComponents.vue
│       └── README.md (optional)
```

## Custom Media Library Component

By default, the Page Builder does not include a built-in media library.

This is intentional—without a custom media library, layout components that rely on images (such as Image Blocks, Hero Sections, and similar) are disabled by default. Only helper components like containers, headings, text, and buttons are available in this state.

To enable image-related components in the builder, you must inject your own media library by passing it to the Page Builder via the `:CustomMediaLibraryComponent` prop:

- Create a `ComponentsPageBuilder` folder in your project for your media library component.
- Pass your custom component to the builder using the `:CustomMediaLibraryComponent` prop.

### You have full control over your media library UI

You are free to design your media library however you wish.  
Use any UI, API, or logic for browsing, searching, and selecting images.

**The only requirement:**  
When the user selects an image and clicks "Use Image" (or similar), you must run the following code to update the builder:

```vue
<script setup>
import { getPageBuilder, usePageBuilderModal } from '@myissue/vue-website-page-builder'
import YourMediaLibraryComponent from './ComponentsPageBuilder/YourMediaLibraryComponent.vue'

// Retrieve Page Builder service instance
const pageBuilderService = getPageBuilder()
const { closeMediaLibraryModal } = usePageBuilderModal()

const applySelectedImage = async function (imageURL) {
  // Set the selected image in the builder's state
  pageBuilderService.stageImageForSelectedElement({
    src: imageURL,
  })

  // Update the builder's HTML image block with the new image
  await pageBuilderService.applyPendingImageToSelectedElement()

  // Close the Page Builder media library modal
  closeMediaLibraryModal()
}
</script>

<template>
  <div>
    <PageBuilder :CustomMediaLibraryComponent="YourMediaLibraryComponent" />
  </div>
</template>
```

## Custom Layout Builder Component

If you want to use your own components—whether custom-designed or tailored to your application's needs—you can inject them directly into the builder.

- Create a `ComponentsPageBuilder` folder in your project for your custom components.
- (Optional) Use a modal to let users browse and select custom components.
- Pass your custom component to the builder using the `:CustomBuilderComponents` prop.
- When a user selects or drops a component from your custom component picker, inject it into the builder using a function like `injectComponentToBuilder`. See the example below for implementation details.

```vue
<script setup>
import { getPageBuilder, usePageBuilderModal } from '@myissue/vue-website-page-builder'
import YourCustomBuilderComponents from './ComponentsPageBuilder/YourCustomBuilderComponents.vue'

// Retrieve Page Builder service instance
const pageBuilderService = getPageBuilder()
const { closeAddComponentModal } = usePageBuilderModal()

const injectComponentToBuilder = async function (componentObject) {
  const component = {
    // ID will be auto-generated by the Page Builder
    id: null,
    html_code: componentObject.html_code,
    title: componentObject.title,
  }

  await pageBuilderService.addComponent(component)
  closeAddComponentModal()
}
</script>

<template>
  <div>
    <PageBuilder :CustomBuilderComponents="YourCustomBuilderComponents" />
  </div>
</template>
```

### How Should the Components Array Look?

Each custom component you inject must be represented as an object with the following structure.  
The Page Builder relies on a `<section></section>` wrapper to correctly render each component and attach event listeners.

- **Required:** The HTML for each component must be wrapped inside a `<section>...</section>`. The builder uses this tag to identify and manage components.
- **Tip:** For optimal responsive layouts, wrap your component content inside:

```html
<section>
  <div class="relative py-4">
    <div class="mx-auto max-w-7xl lg:px-4 px-2">
      <!-- Your content here -->
    </div>
  </div>
</section>
```

**TypeScript interface for reference:**

```typescript
interface Component {
  html_code: string
  id: string | null
  title: string
}

const components: Component[] = [
  {
    html_code: `<section><div class="relative py-4"><div class="mx-auto max-w-7xl lg:px-4 px-2"><div class="break-words"><h2>This is a component</h2></div></div></div></section>`,
    id: null,
    title: 'Header Example One',
  },
  {
    html_code: `<section><div class="relative py-4"><div class="mx-auto max-w-7xl lg:px-4 px-2"><div class="break-words"><h2>This is another component</h2></div></div></div></section>`,
    id: null,
    title: 'Header Example Two',
  },
]
```

## Benefits of this Approach

✅ **Full Control:** Decide exactly where and when to create components within your application.  
✅ **Flexible:** Easily adapt to any project structure or workflow.  
✅ **Secure:** No postinstall scripts or hidden dependencies—just clean, safe code.  
✅ **Simple:** Lightweight package with straightforward, well-documented setup.  
✅ **Optional:** Only create and use the components you actually need—nothing extra.
